(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n.p+"static/media/camera_motion.0d1618db.png"},43:function(e,t,n){e.exports=n(93)},52:function(e,t,n){},79:function(e,t,n){var r={"./Anlage_SICK.mp4":80,"./PXL_sonne_video.mp4":81,"./SICK_Sensor.mp4":82,"./VID_Brunnen.mp4":83,"./VID_CAD.mp4":84,"./VID_Hand.mp4":85,"./VID_Showroom.mp4":86,"./VID_Traktor.mp4":87,"./VID_i_Bau.mp4":88,"./VID_office.mp4":89,"./VID_plarndt.mp4":90,"./video-bank.mp4":91,"./video-plants.mp4":92};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=79},80:function(e,t,n){e.exports=n.p+"static/media/Anlage_SICK.4d6954de.mp4"},81:function(e,t,n){e.exports=n.p+"static/media/PXL_sonne_video.107f7a8d.mp4"},82:function(e,t,n){e.exports=n.p+"static/media/SICK_Sensor.c0ade551.mp4"},83:function(e,t,n){e.exports=n.p+"static/media/VID_Brunnen.3b7c7950.mp4"},84:function(e,t,n){e.exports=n.p+"static/media/VID_CAD.4326bb4e.mp4"},85:function(e,t,n){e.exports=n.p+"static/media/VID_Hand.f6d19da9.mp4"},86:function(e,t,n){e.exports=n.p+"static/media/VID_Showroom.c426abe7.mp4"},87:function(e,t,n){e.exports=n.p+"static/media/VID_Traktor.704f131f.mp4"},88:function(e,t,n){e.exports=n.p+"static/media/VID_i_Bau.8301cbfa.mp4"},89:function(e,t,n){e.exports=n.p+"static/media/VID_office.ebac6992.mp4"},90:function(e,t,n){e.exports=n.p+"static/media/VID_plarndt.d7335ebf.mp4"},91:function(e,t,n){e.exports=n.p+"static/media/video-bank.dda123b7.mp4"},92:function(e,t,n){e.exports=n.p+"static/media/video-plants.f8e9af87.mp4"},93:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(34),i=n.n(o),c=(n(51),n(1)),l=(n(52),n(41)),s=Object(l.a)("localhost:5000",{cors:{origin:"localhost:3000",methods:["GET","POST"],credentials:!0,transports:["websocket","polling"]},allowEIO3:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e4,reconnectionDelayMax:5e4}),u=n(21),f=n(28);function m(){m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:_(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",g={};function y(){}function b(){}function w(){}var E={};s(E,i,function(){return this});var x=Object.getPrototypeOf,O=x&&x(x(C([])));O&&O!==n&&r.call(O,i)&&(E=O);var j=w.prototype=y.prototype=Object.create(E);function N(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function L(e,t){function n(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(u).then(function(e){s.value=e,i(s)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=h;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=S(c,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var s=f(t,n,r);if("normal"===s.type){if(a=r.done?v:p,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=v,r.method="throw",r.arg=s.arg)}}}function S(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=w,a(j,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=s(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},N(L.prototype),s(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new L(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},N(j),s(j,l,"Generator"),s(j,i,function(){return this}),s(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}var h=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1];Object(r.useEffect)(function(){s.on("log_message",function(e){o(function(t){var n=Object(f.a)(t);if("TRAINING"===e.level||"RENDERING"===e.level||"COLMAP"===e.level){var r=n.findIndex(function(t){return t.level===e.level});-1!==r?n[r]={timestamp:e.timestamp,level:e.level,message:e.message}:n=[{timestamp:e.timestamp,level:e.level,message:e.message}].concat(Object(f.a)(n))}else n=[{timestamp:e.timestamp,level:e.level,message:e.message}].concat(Object(f.a)(n));return n})}),0===n.length&&i();var e=setInterval(l,5e3);return function(){s.off("log_message"),clearInterval(e)}},[]);var i=function(){var e=Object(u.a)(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=[{timestamp:"-----------------------",level:"INFO",message:"Logs from the video to nerf trainer"}]).sort(function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}),o(t);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"card mt-3"},a.a.createElement("div",{className:"card-body"},n.map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("span",{style:{color:"blue"}},e.timestamp)," |"," ","INFO"===e.level&&a.a.createElement("span",{style:{color:"blue"}},e.level),"TRAINING"===e.level&&a.a.createElement("span",{style:{color:"green"}},e.level),"RENDERING"===e.level&&a.a.createElement("span",{style:{color:"orange"}},e.level),"COLMAP"===e.level&&a.a.createElement("span",{style:{color:"purple"}},e.level),"- ",a.a.createElement("span",{style:{color:"black"}},e.message))})))},p=n(27),d=n(8),v=function(e){var t=e.label,n=e.id,r=e.name,o=e.value,i=e.onChange,c=e.additionalText;return a.a.createElement("div",{className:"form-group row my-2"},a.a.createElement("label",{htmlFor:n,className:"col-sm-2 col-form-label"},t),a.a.createElement("div",{className:"col-sm-2"},a.a.createElement("input",{type:"number",className:"form-control",id:n,name:r,value:o||"",onChange:i})),a.a.createElement("div",{className:"col-sm-8 col-form-label"},a.a.createElement("p",null,c)))},g=function(){var e=Object(r.useState)({}),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),l=Object(c.a)(i,2),s=l[0],u=l[1];if(s)return a.a.createElement("div",{className:"mt-3"},a.a.createElement("div",{className:"alert alert-success",role:"alert"},"Configs changed successfully!"));var f=function(e){var t=e.target,n=t.name,r=t.value;o(function(e){return Object(d.a)({},e,Object(p.a)({},n,r))})};return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h4",{className:"my-3"},"Configurations"),a.a.createElement(v,{label:"Video Downsample:",id:"videoDownsample",name:"video_downsample",value:n.video_downsample||"",onChange:f,additionalText:"Extracts every 2nd frame by default. Increase to extract every nth frame."}),a.a.createElement(v,{label:"Max Images of Video:",id:"max_count",name:"max_count",value:n.max_count||"",onChange:f,additionalText:"Up to 380 frames can fit into GPU memory for training."}),a.a.createElement(v,{label:"N Steps:",id:"nSteps",name:"n_steps",value:n.n_steps||"",onChange:f,additionalText:"Number of training steps."}),a.a.createElement(v,{label:"Subsample:",id:"subsample",name:"subsample",value:n.subsample||"",onChange:f,additionalText:"After running COLMAP, the number of images for training can be reduced."}),a.a.createElement(v,{label:"aabb_scale:",id:"aabb_scale",name:"aabb_scale",value:n.aabb_scale||"",onChange:f,additionalText:"Scale factor for larger scenes. 1=Scene fits within a unit cube. [1,2,4,8,16,32,...,128]"})),a.a.createElement("button",{className:"btn btn-primary",onClick:function(){fetch("/update_yaml_config",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){u(!0),console.log("Config saved successfully")}).catch(function(e){u(!1),console.error("Error saving config:",e)})}},"Save Config"),s&&a.a.createElement("p",null,s))},y=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),l=Object(c.a)(i,2),s=l[0],u=l[1],f=Object(r.useState)(!1),m=Object(c.a)(f,2),h=m[0],p=m[1];return a.a.createElement("div",null,n&&a.a.createElement(g,{onSave:function(){o(!1)}}),a.a.createElement("div",{className:"mt-3"},a.a.createElement("button",{className:"btn btn-primary m-2",onClick:function(){u(!0),fetch("/start-training",{method:"POST"}).then(function(e){if(e.ok)return e.json();throw new Error("Failed to start training.")}).then(function(e){var t=e.status,n=e.message;"success"===t?console.log(n):console.error(n)}).catch(function(e){console.error(e)}).finally(function(){setTimeout(function(){u(!1)},5e3)})},disabled:s},"Start Training"),a.a.createElement("button",{className:"btn btn-secondary",onClick:function(){p(!0),o(function(e){return!e}),setTimeout(function(){p(!1)},5e3)},disabled:h},"Change Configs")))},b=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(0),l=Object(c.a)(i,2),s=l[0],u=l[1],f=Object(r.useState)(""),m=Object(c.a)(f,2),p=m[0],d=m[1],v=Object(r.useState)(!1),g=Object(c.a)(v,2),b=g[0],w=g[1];return a.a.createElement("div",null,a.a.createElement("input",{type:"file",className:"form-control mb-3",onChange:function(e){o(e.target.files[0])}}),a.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(n){var e=new FormData;e.append("file",n),u(0),d("Uploading..."),fetch("/upload",{method:"POST",body:e,onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);u(t)}}).then(function(e){e.ok?(d("File uploaded successfully!"),w(!0)):d("Upload failed.")}).catch(function(e){d("Upload failed."),console.error(e)})}else d("No file selected.")}},"Upload"),s>0&&a.a.createElement("div",{className:"progress mt-3"},a.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(s,"%")},"aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},s,"%")),p&&a.a.createElement("div",{className:"mt-3 alert ".concat("File uploaded successfully!"===p?"alert-success":"alert-danger"),role:"alert"},p),b&&a.a.createElement(y,null),a.a.createElement(h,null))},w=function(e){return a.a.createElement("div",{className:"text-center"},a.a.createElement("p",{className:"connection-status ".concat(e.isConnected?"connected":"not-connected")},"Checking connection to server: ",e.isConnected?"connected":"not connected"))},E=n(39),x=n.n(E),O=n(95);function j(){j=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new I(r||[]);return a(i,"_invoke",{value:_(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function g(){}function y(){}function b(){}var w={};s(w,i,function(){return this});var E=Object.getPrototypeOf,x=E&&E(E(C([])));x&&x!==n&&r.call(x,i)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function N(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function L(e,t){function n(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(u).then(function(e){s.value=e,i(s)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function _(t,n,r){var a=m;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=S(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=f(t,n,r);if("normal"===s.type){if(a=r.done?d:h,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=d,r.method="throw",r.arg=s.arg)}}}function S(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},N(L.prototype),s(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new L(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},N(O),s(O,l,"Generator"),s(O,i,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var N=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),l=Object(c.a)(i,2),f=l[0],m=l[1],h=function(){var e=Object(u.a)(j().mark(function e(){var t,n;return j().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/images");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,o(n.images),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching images:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){return s.on("training_complete",p),function(){s.off("training_complete",p)}},[]);var p=function(){h(),m(!0)};return a.a.createElement("div",{className:"slider"},f&&n.length>0&&a.a.createElement(O.a,null,n.map(function(e,t){return a.a.createElement(O.a.Item,{key:t},a.a.createElement("img",{className:"d-block w-100",src:"/api/images/".concat(e),alt:"Slider Image ".concat(t+1)}))})))},L=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),l=Object(c.a)(i,2),u=l[0],f=l[1],m=Object(r.useState)(""),h=Object(c.a)(m,2),p=h[0],d=h[1];return Object(r.useEffect)(function(){s.on("export_mesh_complete",function(){o(!0),console.log("mesh export done"),fetch("/api/mesh-url").then(function(e){return e.blob()}).then(function(e){var t=URL.createObjectURL(e);f(t)}),fetch("/get-filename-mesh").then(function(e){return e.json()}).then(function(e){var t=e.filename;d(t)}).catch(function(e){console.error("Error:",e)})})},[]),a.a.createElement("div",null,a.a.createElement("button",{className:"mesh-button-container btn btn-primary my-3",onClick:function(){fetch("/export-mesh").then(function(e){console.log("Mesh export started")}).catch(function(e){console.error("Error mesh export:",e)})}},"Export Mesh"),n&&a.a.createElement("button",{className:"mesh-button-container btn btn-primary m-3",onClick:function(){var e=document.createElement("a");e.href=u,e.download=p,e.click()}},"Download Mesh"))},_=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),l=Object(c.a)(i,2),u=l[0],f=l[1],m=Object(r.useState)(""),h=Object(c.a)(m,2),p=h[0],d=h[1],v=Object(r.useState)(""),g=Object(c.a)(v,2),y=g[0],b=g[1],w=Object(r.useState)(!1),E=Object(c.a)(w,2),O=E[0],j=E[1],_=Object(r.useState)(!1),S=Object(c.a)(_,2),k=S[0],T=S[1],I=Object(r.useState)(!1),C=Object(c.a)(I,2),F=C[0],P=C[1];Object(r.useEffect)(function(){s.on("training_complete",function(){j(!0),R(),fetch("/get-filename").then(function(e){return e.json()}).then(function(e){var t=e.filename;b(t),console.log(y)}).catch(function(e){console.error("Error:",e)})}),s.on("rendering_complete",function(){f(!0),D()})},[]);var D=function(){fetch("/api/rendered-video-url").then(function(e){return e.blob()}).then(function(e){var t=URL.createObjectURL(e);o(t)})},R=function(){fetch("/api/trained-file-url").then(function(e){return e.blob()}).then(function(e){var t=URL.createObjectURL(e);d(t)})};return a.a.createElement(a.a.Fragment,null,O&&a.a.createElement("div",null,a.a.createElement("header",{className:"container"},a.a.createElement("h2",null,"Output Screenshots from Trained NeRF")),a.a.createElement(N,null),a.a.createElement("div",{className:"container my-3"},u&&a.a.createElement("div",{className:"video-container"},a.a.createElement(x.a,{url:n,controls:!0,playing:!0,width:"100%",height:"100%",className:"react-player"})),a.a.createElement(L,null),a.a.createElement("button",{className:"download-button-container btn btn-primary my-3",onClick:function(){T(!0);var e=document.createElement("a");e.href=p,e.download=y,e.click(),setTimeout(function(){T(!1)},5e3)},disabled:k},"Download Training"),!u&&a.a.createElement("button",{className:"video-button-container btn btn-primary m-3",onClick:function(){P(!0),fetch("/render-video").then(function(e){console.log("Video rendering started")}).catch(function(e){console.error("Error rendering video:",e)}).finally(function(){setTimeout(function(){P(!1)},5e3)})},disabled:F},"Render Video"))))},S=(n(78),function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"my-3"},a.a.createElement("div",{className:"card card-body"},a.a.createElement("h4",null,"How to Train Your Own Neural Radiance Field?"),a.a.createElement("p",null,'This application utilizes the instant-ngp framework for training Neural Radiance Fields (NeRFs). For foundational understanding of the technology, you may refer to: https://neuralradiancefields.io/. The primary objective of this application is to train a neural network to represent a captured scene in 3D. Accepted input formats include videos, images in a .zip file, or R3D files generated using the iPhone app Record3D. Default parameters have been optimized to yield the best results in most scenarios. If any issues arise during the process, you may re-upload the video and click "Start Training"; the program will resume from where it left off.'),a.a.createElement("div",{className:"alert alert-warning",role:"alert"},"Note: It is essential to keep this page open in the background to maintain the same socket client connection."),a.a.createElement("p",null,"To achieve optimal results, consider refining the dataset. For video input, ensure the subject is captured from multiple angles and that overlapping of objects is present for feature matching across frames. For images, avoid uploading blurred pictures, and again, make sure there is object overlap. Upon completion of the pipeline, you will be able to view training screenshots and render a video. The trained model can also be downloaded and viewed in the NGP-GUI."),a.a.createElement("h4",null,"Additional Important Details Regarding Training:"),a.a.createElement("p",null,'Graphic card memory is limited; therefore, only a certain number of images will be extracted to fit within this constraint. By default, every second frame is extracted, up to a maximum of 400 images (approximately equivalent to a 30-second video). To accommodate longer videos, you can adjust the frame extraction rate using the "ChangeConfig" - Video Downsample option. For example, setting the value to 10 will extract every 10th frame, thus allowing for a longer video duration. Increasing the "Max Image of Video" configuration will only result in exceeding the GPU memory limit, rendering the training of a NeRF model unfeasible.'))))}),k=function(e){var t=e.cards,n=Object(r.useState)(null),o=Object(c.a)(n,2),i=o[0],l=o[1];return a.a.createElement("div",{className:"accordion"},t.map(function(e,t){return a.a.createElement("div",{key:t,className:"card my-2 ".concat(i===t?"active":"")},a.a.createElement("div",{className:"card-header",onClick:function(){return function(e){l(function(t){return t===e?null:e})}(t)}},a.a.createElement("span",{className:"arrow mx-2 ".concat(i===t?"open":"")},"\u2193"),e.title),i===t&&a.a.createElement("div",{className:"card-body"},e.content))}))},T=n(40),I=n.n(T);function C(){C=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),c=new T(r||[]);return a(i,"_invoke",{value:L(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function g(){}function y(){}function b(){}var w={};s(w,i,function(){return this});var E=Object.getPrototypeOf,x=E&&E(E(I([])));x&&x!==n&&r.call(x,i)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function j(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){function n(a,o,i,c){var l=f(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(u).then(function(e){s.value=e,i(s)},function(e){return n("throw",e,i,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t(function(t,a){n(e,r,t,a)})}return o=o?o.then(a,a):a()}})}function L(t,n,r){var a=m;return function(o,i){if(a===p)throw new Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var l=_(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var s=f(t,n,r);if("normal"===s.type){if(a=r.done?d:h,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=d,r.method="throw",r.arg=s.arg)}}}function _(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=f(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(O,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(N.prototype),s(N.prototype,c,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new N(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},j(O),s(O,l,"Generator"),s(O,i,function(){return this}),s(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return c.type="throw",c.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}var F=function(){var e=function(){var e=Object(u.a)(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/terminate_colmap_processes",{method:"POST"});case 3:e.sent.ok?console.log("Colmap-Prozesse wurden beendet."):console.log("Fehler beim Beenden der Colmap-Prozesse."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Fehler beim Beenden der Colmap-Prozesse.");case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement("button",{onClick:e,className:"btn btn-danger",style:{margin:"10px"}},"Terminate Process")},P=function(){var e=[{title:"How to Capture a Quality Video?",content:a.a.createElement("div",{className:"text-left"},a.a.createElement("p",{className:"mb-2"},"For optimal results, it's crucial to prepare a good dataset. Below is an image illustrating beneficial and detrimental camera movements. Aim to capture the scene slowly and make sure to circle the object at least twice from two different perspectives."),a.a.createElement("div",{className:"text-center"},a.a.createElement("img",{src:I.a,alt:"Beneficial and Detrimental Camera Movements",className:"card-image mx-auto text-center",style:{maxWidth:"50%",height:"auto"}})))},{title:"Terminate Server Processes After Reloading the Page",content:a.a.createElement("div",null,a.a.createElement("p",null,"If the page is reloaded, server processes may continue to run in the background without client communication. Use the button below to terminate these processes. Exercise caution while doing so."),a.a.createElement(F,null))}];return a.a.createElement("div",null,a.a.createElement(k,{cards:e}))},D=function(){var e=n(79),t=e.keys().map(e),o=Object(r.useState)(0),i=Object(c.a)(o,2),l=i[0],s=i[1],u=Object(r.useRef)(null);return a.a.createElement("div",{className:"slider"},t.length>0&&a.a.createElement(O.a,{activeIndex:l,onSelect:function(e){s(e),u.current.load()}},t.map(function(e,t){return a.a.createElement(O.a.Item,{key:t},a.a.createElement("video",{ref:u,autoPlay:!0,muted:!0,className:"d-block w-100",style:{outline:"none",maxWidth:"100%",maxHeight:"50vh"}},a.a.createElement("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."))})))},R=function(){var e=Object(r.useState)(s.connected),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)(function(){return s.connect(),s.on("connect",function(){o(!0)}),s.on("disconnect",function(){o(!1)}),function(){s.disconnect()}},[]),a.a.createElement("div",{className:"container my-5"},a.a.createElement("h1",{className:"text-center mb-4"},"NeRF-Trainer"),a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col-lg-11"},a.a.createElement("details",{open:!0},a.a.createElement("summary",null,a.a.createElement("span",{class:"arrow"},"Hide Background Information")),a.a.createElement("div",{className:"my-2 text-center"},a.a.createElement("h2",null,"Abstract"),a.a.createElement("p",{style:{textAlign:"justify"}},'Neural Radiance Fields (NeRF) represents a method that combines principles from classical computer graphics and machine learning to construct 3D scene representations from 2D images. Instead of directly reconstructing the complete 3D scene geometry, NeRF generates a volumetric representation known as "radiance fields," capable of assigning color and density to any point in the relevant 3D space. However, generating "neural radiance fields" requires developer expertise, substantially limiting its industrial application. Hence, we present SICK-NeRF. The NeR-Trainer is a user-friendly framework that enables the construction of custom NeRF representations, allowing anyone, regardless of their developer experience, to generate NeRFs. If you haven\'t yet engaged with NeRF, we recommend reading the official paper: ',a.a.createElement("a",{href:"https://www.matthewtancik.com/nerf"},"NeRF - Representing Scenes for View Synthesis"),".")),a.a.createElement("div",{className:"my-2 text-center"},a.a.createElement("h2",{className:"mb-3"},"Results from Trained NeRFs"),a.a.createElement(D,null)),a.a.createElement("div",{className:"text-center"},a.a.createElement("h2",{className:"my-3"},"Procedure"),a.a.createElement("p",{style:{textAlign:"justify"}},'Creating NeRFs requires a specific approach. First, the video must be prepared to serve as training input. Individual frames from the video are extracted to later serve as training data. Using COLMAP, a Structure From Motion tool, the camera positions in the world coordinate system are estimated. These camera positions are crucial for training as the generated colors and densities heavily depend on the viewing angles. COLMAP starts by extracting features from the images. These features are distinctive points that can be recognized in various images. These features must be invariant to affine transformations and brightness. COLMAP employs the SIFT algorithm here. During the feature matching step, features between pairs of images are compared to find matches. Using these matches, a "Sparse Map" is created in the final step. Here, camera positions are estimated, and some points in three-dimensional space are mapped. The COLMAP step is time-consuming as images are compared pairwise, which can take a significant amount of time with many images. For further interest, we refer you to the paper: ',a.a.createElement("a",{href:"https://demuc.de/papers/schoenberger2016sfm.pdf"},"Structure-from_Motion Revisited"),'. After the COLMAP step, the collected information is stored in a "JSON" file, which serves as input for the actual training.'))),a.a.createElement(w,{isConnected:n}),a.a.createElement(S,null),a.a.createElement(_,null),a.a.createElement(N,null),a.a.createElement("div",{className:"card my-5"},a.a.createElement("div",{className:"card-body"},a.a.createElement(b,null))),a.a.createElement(P,null))))},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then(function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(R,null))),G()}},[[43,1,2]]]);
//# sourceMappingURL=main.c1a2c0c1.chunk.js.map